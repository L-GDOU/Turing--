一、使用OpenCV几何图形绘制 
1、构建800×800的白色画布，先构思放置区域以避免重叠。
2、定义颜色参数，方便后续调用。
3、由于后续的边缘检测、轮廓计数和模板匹配需要绘制的图像好辨识，所以我选择绘制基础的几何图形，将大小与位置整齐排布，保留合适的间隔，使用多种颜色，保存图像。

二、边缘检测与计数  
1、为了降低计算复杂度，先把彩色图像降为灰度图并做平滑用来轻度去噪。
2、使用Canny提取边缘，得到二值边缘图。
3、只调用外轮廓提取并过滤极小轮廓，最后用黑线在原图上绘制轮廓得到轮廓检测结果，便于验证。
4、统计轮廓数量并打印。

三、模板匹配
1、由于cv2.matchTemplate是固定尺度、固定方向的灰度相似度匹配，为了尽可能匹配更多相似图形，我选 择了不需要考虑旋转的圆形作为模版截取。 
2、先在全图范围内滑动模板，计算每个位置与模板之间的归一化相关系数，从而获得整体相似度分布。在此基础上，通过设定阈值筛选出可信度较高的响应区域，并对相邻的重复匹配框进行合并与去重处理，使最终标注结果更加清晰。
3、其中模板匹配具有局限，匹配阈值的选取在保证误检率可控的同时，也导致了一些目标因尺度或旋转差异未 被检出，所以没能将全部圆匹配成功。

四、姿态估计与动作分析 
1、先实例化pose，设置参数：由于pose这个视频要做连续动作的分析，所以启用连续帧追踪，并在精度和速 度取一个稳定的中间值。因为要估计速度，而关键点会受其他因素影响产生抖动，所以做时间平滑，可以提高位移计算的稳定性。再设置阈值，避免将明显不可靠的关键点纳入计算，从而减少误差。
2、打开视频，读取fps、W、H，用来做像素坐标换算与速度计算。建视频写入器用来保存输出视频，且保证与原视频的尺寸和帧率一致，初始化变量，逐帧读取视频。
3、把OpenCV的BGR帧转换为RGB做关键点检测。检测到姿态，则把landmark列表赋给一组归一化关键点，把检测到的所有关键点和连线绘制回原始帧，可视化视频。再把每帧关键点坐标和可见度记录到文件。
4、由于髋部在人体运动中接近整体重心位置，运动轨迹相对平滑，不会像脚部等末端关键点那样在跑步过程中产生剧烈的摆动，同时想到对左右髋关键点取平均可以有效减少误差带来的影响，使得到的位移能更好地反映人体整体的运动趋势。 因此选择左右髋中点作为速度估算的参考点。
5、考虑到MediaPipe输出的是归一化坐标，不够直观，但又缺乏真实数据，无法算出真实物理速度，最终采用计算相邻帧中髋部中点的像素位移并结合帧率得到相对速度序列，体现运动强度变化。

具体相对速度估算方法：若存在上一帧中点，则计算当前帧与上一帧中点的欧氏距离，将每帧的位移乘以fps得到像素/秒的近似速度并存储，然后更新当前中点。然后遍历当前帧的所有关键点，将每个关键点的帧号、索引和归一化坐标记录到列表中，把绘制了骨架的帧导入输出视频，并计数+1。处理完成后释放资源，将列表数据存入csv，计算并打印速度列表的平均值作为平均相对速度（px/s）。